===============================================================================

　ドメインごとにサイトを立てられる簡易ＨＴＴＰサーバー

===============================================================================


■ソフトの概要

　シンプルなＨＴＴＰサーバーです。
　ＧＥＴ（ページを表示したり、ファイルをダウンロードしたりするだけ）しかできませんが、
　煩雑な設定をすることなく、簡単にサーバーを立てることができます。

　何か物足りないなと思ったので、ドメインごとに異なるサイトを設置できるようにしました。
　グローバルＩＰが一つしかなくても、取得したドメインの数だけサイトを立てられます。


■動作環境

　Windows 10
　確認していませんが Windows 7/8/8.1 でも動くかもしれません。

　.NET Framework 4 を使用します。


■インストール方法

　アーカイブの中身をローカルディスク上の任意の場所にコピーして下さい。


■アンインストール方法

　レジストリなどは一切使っていません。
　ファイルを削除するだけでアンインストールできます。


■使い方

　WHTT.exe を実行するとサーバーが起動します。

　ブラウザから以下のＵＲＬを開いてみて下さい。

　　http://localhost/
　　http://127.0.0.1/
　　http://127.0.0.2/

　それぞれ異なるページが表示されたら起動は成功です。


　●メニューの説明

　　アプリケーション / 開始 ... 停止したサーバーを再起動します。
　　アプリケーション / 停止 ... サーバーを停止します。
　　アプリケーション / 終了 ... サーバーを停止して、プログラムを終了します。
　　設定 / ポート番号       ... ポート番号を変更します。
　　設定 / 公開フォルダ     ... 公開フォルダを変更します。
　　ツール / アクセスログ   ... アクセスログを表示します。

　●公開フォルダの設定

　　リストには「ドメイン名 ==> 対応するディレクトリ」の形で表示されます。
　　登録されていないドメイン名でアクセスされた場合、default に対応するディレクトリが使用されます。

　　例えば happy-tea-time ==> C:\HTT\DocRoot と登録した場合、
　　http://happy-tea-time/sub/abc.txt というリクエストは C:\HTT\DocRoot\sub\abc.txt というファイルの取得になります。

　　また default ==> C:\Assam と登録し darjeeling-tea というドメインを登録していない場合、
　　http://darjeeling-tea/orange-pekoe.html というリクエストは C:\Assam\orange-pekoe.html というファイルの取得になります。

　　ドメイン名をどう指定して良いか分からない場合は、アクセスログの Host:"ホスト名" に合わせてみて下さい。
　　例えば Host:"earlgray" というリクエストは、ドメイン名 earlgray に対応します。

　　ドメイン毎に分ける必要がない場合は、default のみ登録してお使い下さい。

　●アクセスログ

　　ログのデータサイズは逐次大きくなりますが、およそ２００ＫＢを超えることはありません。
　　（２００ＫＢを超えた頃に、古い方から１００ＫＢ削除します）

　　▼フォーマット（WHTT.exe から見た場合）

　　　日付と時刻 クライアントIP "リクエスト" Host:"ホスト名" User-Agent:"ユーザーエージェント"
　　　Domain:"紐付けられたドメイン名" Target-Path:"アクセス先のローカルパス"
　　　Status: ステータスコード

　　　フォーマットを変更するには WHTT_AccessLogFormat.conf を書き換えて下さい。
　　　WHTT_AccessLogFormat.conf の書式は以下のとおり。

　　　　文字コード       ... Shift_JIS
　　　　置き換えパターン ...

　　　　　$TimeStamp  ... 日付と時刻
　　　　　$ClientIP   ... クライアントIP
　　　　　$Request    ... リクエスト
　　　　　$Host       ... ホスト名
　　　　　$UserAgent  ... ユーザーエージェント
　　　　　$Domain     ... 紐付けられたドメイン名
　　　　　$TargetPath ... アクセス先のローカルパス
　　　　　$Status     ... ステータスコード


■制限

　起動時に以下の条件を満たす必要があります。

　　物理メモリの空き　２００ＭＢ以上
　　物理メモリの空き　２０パーセント以上
　　ハードディスクの空き領域　２ＧＢ以上　※1

　以下のいずれかの状態になると、新しい接続を制限します。

　　物理メモリの空き　残り１５０ＭＢ以下
　　物理メモリの空き　残り１５パーセント以下
　　ハードディスクの空き領域　残り１．５ＧＢ以下　※1

　以下のいずれかの状態になると、全ての接続を切断して待機状態になります。

　　物理メモリの空き　残り１００ＭＢ以下
　　物理メモリの空き　残り１０パーセント以下
　　ハードディスクの空き領域　残り１ＧＢ以下　※1

　同じＩＰアドレスからの最大同時接続を２０に制限しています。


　※1 環境変数 TMP が指すドライブ


■取り扱い種別

　フリーソフト


■作者への連絡先

　stackprobes@gmail.com

　バグや要望などご連絡ください。

